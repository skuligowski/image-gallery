<div class="layout-container">
  <header class="layout-header">
    <div class="title"><span>Administration > {{album.name}}</span></div>
    <ul class="navigation" style="font-size:1.2rem">
      <li></li>
    </ul>
  </header>
  <nav>
    <p-button class="action" label="Add images" (click)="openAddImagesDialog()"></p-button>
    <p-button class="action" label="Modify album"></p-button>
    <p-button class="action" label="Delete album"></p-button>
  </nav>
  <p-table [value]="images" dataKey="filename">
    <ng-template pTemplate="header">
      <tr>
        <th style="width:2.5em"></th>
        <th style="width:200px">Image</th>
        <th>Filename</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-image let-index="rowIndex">
      <tr [pReorderableRow]="index">
        <td>
          <i class="pi pi-bars" pReorderableRowHandle></i>
        </td>
        <td>
          <img class="image-preview" [src]="image.url" />
        </td>
        <td>{{image.filename}}</td>
      </tr>
    </ng-template>
  </p-table>
</div>

<p-dialog [(visible)]="display" [positionTop]="100" [resizable]="false"
          [blockScroll]="true" [modal]="true" appendTo="body" [draggable]="false" [width]="800">
  <p-header>
    Select images
  </p-header>
  <p-table [value]="files" [columns]="cols" [lazy]="true" (onLazyLoad)="loadNodes()"
           [loading]="loading" [scrollable]="true" scrollHeight="200px" [(selection)]="selectedFiles" dataKey="filename">
    <ng-template pTemplate="header" let-columns>
      <tr>
        <th style="width: 3em">
          <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
        </th>
        <th *ngFor="let col of columns">
          {{col.header}}
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-columns="columns">
      <tr [pSelectableRow]="!rowData.dir && rowData">
        <td style="width: 3em; text-align: center;">
          <p-tableCheckbox *ngIf="!rowData.dir" [value]="rowData"></p-tableCheckbox>
        </td>
        <ng-container *ngIf="!rowData.dir; else dirTemplate">
          <td *ngFor="let col of columns;">
            {{rowData[col.field]}}
          </td>
        </ng-container>
        <ng-template #dirTemplate>
          <td colspan="3" style="cursor: pointer" (click)="onDirSelect(rowData)">
            {{rowData.filename}}
          </td>
        </ng-template>
      </tr>
    </ng-template>
  </p-table>
  <p-footer>
    <p-button label="Add images" (click)="addImages()"></p-button>
  </p-footer>
</p-dialog>
