<div class="layout-container">
  <header class="layout-header">
    <div class="title">
      <i class="back-button pi pi-arrow-circle-left" (click)="navigateToAlbums()"></i>
      <span>{{album.name}}</span>
    </div>
    <ul class="navigation" style="font-size:1.2rem">
      <li></li>
    </ul>
  </header>
  <nav>
    <p-button class="action" label="Add images" (click)="fileSelector.open()"></p-button>
    <p-button class="action" [disabled]="!selected.length" label="Delete images" (click)="selected.length && removeImages(selected)"></p-button>
    <p-button class="action" label="Modify album" (click)="albumModify.open(album);"></p-button>
    <p-button class="action" label="Delete album" (click)="removeAlbum(album.id)"></p-button>
  </nav>
  <p-table [value]="images" dataKey="url" [(selection)]="selected">
    <ng-template pTemplate="header">
      <tr>
        <th class="checkbox-column">
          <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
        </th>
        <th style="width: 200px">Image</th>
        <th>Image data</th>
        <th style="width: 80px">Move</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-image let-index="rowIndex">
      <tr [pReorderableRow]="index">
        <td class="checkbox-column">
          <p-tableCheckbox [value]="image"></p-tableCheckbox>
        </td>
        <td>
          <img class="image-preview" [src]="image.url" />
        </td>
        <td>
          <ul class="data-list">
            <li><span class="label">Filename:</span> {{image.filename}}</li>
            <li><span class="label">Resolution:</span> {{image.width}} x {{image.height}}</li>
            <li><span class="label">Url:</span> {{image.url}}</li>
            <li *ngIf="image.title"><span class="label">Title:</span> {{image.title}}</li>
          </ul>
        </td>
        <td class="actions">
          <i class="pi pi-bars" pReorderableRowHandle></i>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
<app-library-file-selector #fileSelector (selectFiles)="addImages($event)"></app-library-file-selector>
<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle" width="425" message="Do you really want to delete this album?"></p-confirmDialog>
<app-album-create #albumModify [albums]="albums" (confirm)="onUpdateAlbum($event)" headerLabel="Modify album"></app-album-create>
